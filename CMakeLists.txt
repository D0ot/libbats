cmake_minimum_required (VERSION 2.6)
project (libbats)

set(CMAKE_MODULE_PATH ${CMAKE_SOURCE_DIR}/cmake/)
set(BUILD_SHARED_LIBS ON CACHE BOOL "Choose whether to build a shared library")

INCLUDE(FindPkgConfig)

find_package(Eigen3 REQUIRED)
find_package(LibXml2 REQUIRED)
find_package(SigC++ REQUIRED)
PKG_CHECK_MODULES(GTKMM, gtkmm-2.4)
#find_package(GTKmm REQUIRED)

set(LIBBATS_SOURCES ./PortableParser/static.cc ./WorldModel/onMySide.cc ./WorldModel/initJoints.cc ./WorldModel/getDirectionOfOpponentGoal.cc ./WorldModel/onMyFeet.cc ./WorldModel/onMyBelly.cc ./WorldModel/onMyBack.cc ./WorldModel/worldmodel.cc ./WorldModel/static.cc ./WorldModel/initWeights.cc ./WorldModel/updateGameState.cc ./WorldModel/update.cc ./WorldModel/otherCloserTo.cc ./WorldModel/getDirectionOfFall.cc ./TimeVal/timeval.cc ./Behavior/capable.cc ./Behavior/Behavior.cc ./Behavior/PrimitiveBehavior/Beam/run.cc ./Behavior/PrimitiveBehavior/Beam/getCurrentState.cc ./Behavior/PrimitiveBehavior/Beam/getCapability.cc ./Behavior/PrimitiveBehavior/MoveJoint/run.cc ./Behavior/PrimitiveBehavior/MoveJoint/MoveJoint.cc ./Behavior/PrimitiveBehavior/MoveUniversalJoint/run.cc ./Behavior/PrimitiveBehavior/MoveUniversalJoint/MoveUniversalJoint.cc ./Behavior/PrimitiveBehavior/MoveHingeJoint/run.cc ./Behavior/PrimitiveBehavior/MoveHingeJoint/MoveHingeJoint.cc ./Behavior/doNextStep.cc ./Behavior/achieveGoal.cc ./Behavior/doLastChosen.cc ./Behavior/doCurrentStep.cc ./Behavior/dumpStack.cc ./Behavior/generateConf.cc ./Behavior/MoveJointTo/MoveJointTo.cc ./Behavior/MoveJointTo/generateGoal.cc ./Behavior/setGoal.cc ./Behavior/BeamTo/getCurrentState.cc ./Behavior/BeamTo/BeamTo.cc ./Behavior/BeamTo/update.cc ./Behavior/BeamTo/generateGoal.cc ./Behavior/BeamTo/getCapability.cc ./Behavior/static.cc ./Behavior/addToSlot.cc ./Behavior/update.cc ./Behavior/Trainer/Trainer.cc ./Behavior/Trainer/achieveGoal.cc ./Behavior/Trainer/resetJoints.cc ./Behavior/Trainer/getCurrentState.cc ./Behavior/Trainer/update.cc ./Behavior/Trainer/generateGoal.cc ./Behavior/Trainer/getCapability.cc ./Behavior/reset.cc ./SocketAddress/socketaddress.cc ./Socket/socket.cc ./AgentModel/onMySide.cc ./AgentModel/initBody.cc ./AgentModel/onMyFeet.cc ./AgentModel/onMyBelly.cc ./AgentModel/onMyBack.cc ./AgentModel/predict.cc ./AgentModel/setUnum.cc ./AgentModel/getBodyPartCopy.cc ./AgentModel/updatePosture.cc ./AgentModel/getJointName.cc ./AgentModel/update.cc ./AgentModel/checkDirectionOfFall.cc ./AgentModel/AgentModel.cc ./AgentModel/updateCOM.cc ./AgentModel/isDown.cc ./AgentModel/getBodyCopy.cc ./AgentModel/initBody2.cc ./Path/path.cc ./Path/init.cc ./HumanoidAgent/run.cc ./HumanoidAgent/startUp.cc ./HumanoidAgent/static.cc ./SocketComm/initConnection.cc ./SocketComm/TrainerSocketComm/setBallPos.cc ./SocketComm/TrainerSocketComm/setBallVel.cc ./SocketComm/TrainerSocketComm/setBallPosVel.cc ./SocketComm/TrainerSocketComm/static.cc ./SocketComm/TrainerSocketComm/setPlayMode.cc ./SocketComm/TrainerSocketComm/kickOff.cc ./SocketComm/TrainerSocketComm/init.cc ./SocketComm/AgentSocketComm/moveHingeJoint.cc ./SocketComm/AgentSocketComm/say.cc ./SocketComm/AgentSocketComm/moveUniversalJoint.cc ./SocketComm/AgentSocketComm/movetorquejoint.cc ./SocketComm/AgentSocketComm/syn.cc ./SocketComm/AgentSocketComm/update.cc ./SocketComm/AgentSocketComm/init.cc ./SocketComm/AgentSocketComm/beam.cc ./SocketComm/AgentSocketComm/makeMoveHingeJoint.cc ./SocketComm/AgentSocketComm/moveJoint.cc ./SocketComm/AgentSocketComm/makemovetorquejointmessage.cc ./SocketComm/send.cc ./SocketComm/static.cc ./SocketComm/parseInput.cc ./SocketComm/receive.cc ./SocketComm/sendmessage.cc ./SocketComm/nextMessage.cc ./Debugger/RoboVizDebugger/drawAgentAnnotation.cc ./Debugger/RoboVizDebugger/drawProgressCircle.cc ./Debugger/RoboVizDebugger/drawCircle.cc ./Debugger/RoboVizDebugger/onThinkEnd.cc ./Debugger/RoboVizDebugger/drawShapes.cc ./Debugger/RoboVizDebugger/drawSphere.cc ./Debugger/RoboVizDebugger/drawPolygon.cc ./Debugger/RoboVizDebugger/drawCurve.cc ./Debugger/RoboVizDebugger/getSetName.cc ./Debugger/RoboVizDebugger/plot.cc ./Debugger/RoboVizDebugger/drawLine.cc ./Debugger/RoboVizDebugger/drawPlayerSkeleton.cc ./Debugger/RoboVizDebugger/RoboVizDebugger.cc ./Debugger/RoboVizDebugger/start.cc ./Debugger/RoboVizDebugger/drawTransformationAxes.cc ./Debugger/RoboVizDebugger/init.cc ./Debugger/RoboVizDebugger/drawAnnotation.cc ./Debugger/RoboVizDebugger/reDraw.cc ./Debugger/RoboVizDebugger/drawPoint.cc ./Distribution/NormalDistribution/predict.cc ./Distribution/NormalDistribution/draw.cc ./Distribution/NormalDistribution/update.cc ./Distribution/NormalDistribution/init.cc ./Distribution/NormalDistribution/getP.cc ./Distribution/MonteCarloDistribution/setMu.cc ./Distribution/MonteCarloDistribution/getSigma.cc ./Distribution/MonteCarloDistribution/predict.cc ./Distribution/MonteCarloDistribution/draw.cc ./Distribution/MonteCarloDistribution/setSigma.cc ./Distribution/MonteCarloDistribution/update.cc ./Distribution/MonteCarloDistribution/init.cc ./Distribution/MonteCarloDistribution/getMu.cc ./ObjectInfo/DynamicObjectInfo/PlayerInfo/PlayerInfo.cc ./ObjectInfo/ObjectInfo.cc ./AST/select.cc ./AST/findall.cc ./AST/finddeep.cc ./AST/selectall.cc ./AST/find.cc ./AST/findalldeep.cc ./Parser/parse.cc ./Parser/parser0.cc ./Parser/generate.cc ./Parser/static.cc ./Parser/initialize.cc ./Predicate/destroy.cc ./Predicate/generate.cc ./Predicate/copy.cc ./Predicate/toString.cc ./Predicate/operator0.cc ./Cerebellum/outputCommands.cc ./Cerebellum/cerebellum.cc ./Cerebellum/addAction.cc ./Localizer/SimpleLocalizer/SimpleLocalizer.cc ./Localizer/SimpleLocalizer/update.cc ./Localizer/KalmanLocalizer/getGoalMidpoint.cc ./Localizer/KalmanLocalizer/updateSelfGlobal.cc ./Localizer/KalmanLocalizer/tryObserveGlobalRotation.cc ./Localizer/KalmanLocalizer/updateGlobalRotation.cc ./Localizer/KalmanLocalizer/addGlobalMeasurement.cc ./Localizer/KalmanLocalizer/getDirections.cc ./Localizer/KalmanLocalizer/updateRaw.cc ./Localizer/KalmanLocalizer/updateBallGlobal.cc ./Localizer/KalmanLocalizer/onBeam.cc ./Localizer/KalmanLocalizer/KalmanLocalizer.cc ./Localizer/KalmanLocalizer/updatePlayersGlobal.cc ./Localizer/KalmanLocalizer/globalToLocal.cc ./Localizer/KalmanLocalizer/update.cc ./Localizer/KalmanLocalizer/getCochleaIdForObject.cc ./Localizer/KalmanLocalizer/init.cc ./Localizer/KalmanLocalizer/resetBall.cc ./Localizer/getAliveObjects.cc ./Localizer/getFilteredObjects.cc ./Localizer/getFilteredPlayers.cc ./Random/uniform2.cc ./Random/uniform.cc ./Random/seed.cc ./Random/stdNorm.cc ./Clock/RC3DClock/update.cc ./BehaviorFactory/createBehavior.cc ./Types/getPlayerWithUnum.cc ./Types/isTeamMate.cc ./Types/unumFor.cc ./Types/objectEnumFor.cc ./Types/nameOf.cc ./Conf/getsection.cc ./Conf/parseConf.cc ./Conf/selectxpath.cc ./Conf/Conf.cc ./Conf/getParams.cc ./Conf/getparam.cc ./PlayerClass/static.cc ./PlayerClass/BATSPlayerClass/BATSPlayerClass.cc ./Cochlea/Cochlea.cc ./Cochlea/parseTransform.cc ./Cochlea/translateInfo.cc ./Cochlea/getLineJunctions.cc ./Cochlea/parseVect.cc ./Cochlea/synthesizeDerivedData.cc ./Cochlea/parsePolar.cc ./Cochlea/update.cc ./Cochlea/parseScalar.cc ./Cochlea/integrate.cc ./Cochlea/nameOf.cc ./BehaviorTree/create.cc ./BehaviorTree/static.cc ./BehaviorTree/createBehaviorTrees.cc ./BehaviorTree/BehaviorTree.cc ./Math/makeRotation.cc ./Math/distanceLinePoint.cc ./Math/calcperpend.cc ./Math/atSameSideOf.cc ./Math/intersectVectorPlane.cc ./Math/polarToCartesian.cc ./Math/cartesianToPolar.cc ./Math/intersectLines2D.cc ./Math/linePointClosestToPoint.cc ./Math/intersectLineCircle.cc )

set(LIBBATS_INCLUDE_DIRS ${EIGEN3_INCLUDE_DIR} ${LIBXML2_INCLUDE_DIR} ${SigC++_INCLUDE_DIRS})

# Don't build Gtk
if(GTKMM_FOUND)
  list(APPEND LIBBATS_SOURCES  ./Debugger/GtkDebugger/onDebugText.cc ./Debugger/GtkDebugger/run.cc ./Debugger/GtkDebugger/onThinkEnd.cc ./Debugger/GtkDebugger/drawShapes.cc ./Debugger/GtkDebugger/GtkDebugger.cc ./Debugger/GtkDebugger/drawBall.cc ./Debugger/GtkDebugger/drawCurve.cc ./Debugger/GtkDebugger/plot.cc ./Debugger/GtkDebugger/drawPlayers.cc ./Debugger/GtkDebugger/start.cc ./Debugger/GtkDebugger/drawSelf.cc ./Debugger/GtkDebugger/init.cc ./Debugger/GtkDebugger/drawField.cc ./Debugger/GtkDebugger/reDraw.cc ./Debugger/GtkDebugger/onDrawingAreaExpose.cc)
  list(APPEND LIBBATS_INCLUDE_DIRS ${GTKMM_INCLUDE_DIRS})
else(GTKMM_FOUND)
  message(STATUS "  GtkDebugger will not be built")
endif(GTKMM_FOUND)

include_directories(${LIBBATS_INCLUDE_DIRS})

add_library(bats
${LIBBATS_SOURCES}
)

set(CMAKE_CXX_FLAGS "-std=c++0x -DEIGEN2_SUPPORT_STAGE30_FULL_EIGEN3_API")

install(TARGETS bats DESTINATION lib)

